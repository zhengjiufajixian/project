(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity/publish/publish"],{"06bd":function(t,e,o){},4231:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(o("4c84"));function i(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if(Object.prototype.hasOwnProperty.call(t,u)){var c=n?Object.getOwnPropertyDescriptor(t,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=t[u]}return o.default=t,e&&e.set(t,o),o}var c={data:function(){return{fz26:{fontSize:"26rpx"},fz30:{fontSize:"30rpx"},action:n.baseUrl+"/file/upload",haeder:{Authorization:t.getStorageSync("tokenHead")+t.getStorageSync("token")},formData:{type:"commodity",id:t.getStorageSync("shopId")||1},commodityName:"",commodityTypeCode:"",commodityTypeName:"",commodityPrice:"",commodityRemark:"",commodityImg:[],type:"",show:!1,list:[],typeList:[]}},onLoad:function(){this.getTypeList()},methods:{getTypeList:function(){var t=this;this.$u.api.getTypeList().then((function(e){for(var o=[],n=0;n<e.length;n++){var i=e[n],u={label:i.typeName,value:i.typeCode};o.push(u)}t.typeList=o}))},beforeUpload:function(){t.showLoading({title:"正在上传..."})},addCommodityImgList:function(t,e,o,n){this.commodityImg.push(t)},removeCommodityImgList:function(t,e,o){var n=this.commodityImg;n.splice(t,1),this.commodityImg=n},confirm:function(t){this.commodityTypeCode=t[0].value,this.commodityTypeName=t[0].label},submit:function(){this.commodityTypeCode?this.commodityName?this.commodityImg.length<=0?t.showToast({title:"请至少上传一张图片",icon:"none"}):this.commodityPrice?(this.commodityPrice=Number(this.commodityPrice).toFixed(2),this.commodityRemark?this.$u.api.addCommodity({merchantId:t.getStorageSync("merchantId"),shopId:t.getStorageSync("shopId"),commodityName:this.commodityName,commodityTypeCode:this.commodityTypeCode,commodityPrice:this.commodityPrice,commodityRemark:this.commodityRemark,commodityImg:JSON.stringify(this.commodityImg)}).then((function(e){e?t.showToast({title:"商品发布成功",mask:!0,success:function(){setTimeout((function(){t.navigateBack()}),1e3)}}):t.showToast({title:"商品添加失败，请稍后重试",icon:"none",mask:!0})})):t.showToast({title:"请输入商品描述",icon:"none"})):t.showToast({title:"请输入价格",icon:"none"}):t.showToast({title:"请输入详细名称",icon:"none"}):t.showToast({title:"请选择产品类型",icon:"none"})}}};e.default=c}).call(this,o("543d")["default"])},5144:function(t,e,o){"use strict";var n=o("06bd"),i=o.n(n);i.a},"606e":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return u})),o.d(e,"a",(function(){return n}));var n={uGap:function(){return o.e("uview-ui/components/u-gap/u-gap").then(o.bind(null,"94c1"))},uIcon:function(){return o.e("uview-ui/components/u-icon/u-icon").then(o.bind(null,"ff68"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-input/u-input")]).then(o.bind(null,"f5a0"))},uLine:function(){return o.e("uview-ui/components/u-line/u-line").then(o.bind(null,"ee2f"))},uUpload:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-upload/u-upload")]).then(o.bind(null,"fea3"))},uButton:function(){return o.e("uview-ui/components/u-button/u-button").then(o.bind(null,"7efc"))},uSelect:function(){return o.e("uview-ui/components/u-select/u-select").then(o.bind(null,"8a83"))}},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.show=!0})},u=[]},"91c4":function(t,e,o){"use strict";o.r(e);var n=o("606e"),i=o("b111");for(var u in i)"default"!==u&&function(t){o.d(e,t,(function(){return i[t]}))}(u);o("5144");var c,r=o("f0c5"),a=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"7d627c30",null,!1,n["a"],c);e["default"]=a.exports},b111:function(t,e,o){"use strict";o.r(e);var n=o("4231"),i=o.n(n);for(var u in n)"default"!==u&&function(t){o.d(e,t,(function(){return n[t]}))}(u);e["default"]=i.a},cdd3:function(t,e,o){"use strict";(function(t){o("7ade");n(o("66fd"));var e=n(o("91c4"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])}},[["cdd3","common/runtime","common/vendor"]]]);