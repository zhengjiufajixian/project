(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commodity/edit/edit"],{"0c87":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=c(o("4c84"));function n(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=n();if(e&&e.has(t))return e.get(t);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var u=i?Object.getOwnPropertyDescriptor(t,c):null;u&&(u.get||u.set)?Object.defineProperty(o,c,u):o[c]=t[c]}return o.default=t,e&&e.set(t,o),o}var u={data:function(){return{fz26:{fontSize:"26rpx"},fz30:{fontSize:"30rpx"},action:i.baseUrl+"/file/upload",haeder:{Authorization:t.getStorageSync("tokenHead")+t.getStorageSync("token")},formData:{type:i.uploadImgtype.commodity,id:t.getStorageSync("shopId")},commodityId:"",commodityName:"",commodityTypeCode:"",commodityTypeName:"",commodityPrice:"",commodityRemark:"",commodityImg:[],type:"",show:!1,list:[],typeList:[],defaultValue:"",imgList:[]}},onLoad:function(t){var e=JSON.parse(t.data);this.commodityId=e.id,this.commodityName=e.commodityName,this.commodityTypeCode=e.commodityTypeCode,this.commodityPrice=e.commodityPrice,this.commodityRemark=e.commodityRemark,this.getImg(JSON.parse(e.commodityImg)),this.getTypeList()},methods:{getImg:function(t){for(var e=[],o=0;o<t.length;o++){var i=t[o],n={url:i};e.push(n)}this.imgList=e,this.commodityImg=t},getTypeList:function(){var t=this;this.$u.api.getTypeList().then((function(e){for(var o=[],i=0;i<e.length;i++){var n=e[i],c={label:n.typeName,value:n.typeCode};n.typeCode==t.commodityTypeCode&&(t.commodityTypeName=n.typeName),o.push(c)}t.typeList=o}))},addCommodityImgList:function(t,e,o,i){this.commodityImg.push(t)},removeCommodityImgList:function(t,e,o){var i=this.commodityImg;i.splice(t,1),this.commodityImg=i},confirm:function(t){this.commodityTypeCode=t[0].value,this.commodityTypeName=t[0].label},submit:function(){this.commodityTypeCode?this.commodityName?this.commodityImg.length<=0?t.showToast({title:"请至少上传一张图片",icon:"none"}):this.commodityPrice?(this.commodityPrice=Number(this.commodityPrice).toFixed(2),this.commodityRemark?this.$u.api.updateCommodity({commodityId:this.commodityId,commodityName:this.commodityName,commodityTypeCode:this.commodityTypeCode,commodityPrice:this.commodityPrice,commodityRemark:this.commodityRemark,commodityImg:JSON.stringify(this.commodityImg)}).then((function(e){null===e?t.showToast({title:"修改成功",mask:!0,success:function(){setTimeout((function(){t.navigateBack()}),1e3)}}):t.showToast({title:"修改失败，请稍后重试",icon:"none",mask:!0})})):t.showToast({title:"请输入商品描述",icon:"none"})):t.showToast({title:"请输入价格",icon:"none"}):t.showToast({title:"请输入详细名称",icon:"none"}):t.showToast({title:"请选择产品类型",icon:"none"})}}};e.default=u}).call(this,o("543d")["default"])},"28ee":function(t,e,o){"use strict";(function(t){o("7ade");i(o("66fd"));var e=i(o("3159"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},3159:function(t,e,o){"use strict";o.r(e);var i=o("9277"),n=o("a5fc");for(var c in n)"default"!==c&&function(t){o.d(e,t,(function(){return n[t]}))}(c);o("618f");var u,m=o("f0c5"),r=Object(m["a"])(n["default"],i["b"],i["c"],!1,null,"e9b21f60",null,!1,i["a"],u);e["default"]=r.exports},"618f":function(t,e,o){"use strict";var i=o("fb14"),n=o.n(i);n.a},9277:function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"c",(function(){return c})),o.d(e,"a",(function(){return i}));var i={uGap:function(){return o.e("uview-ui/components/u-gap/u-gap").then(o.bind(null,"94c1"))},uIcon:function(){return o.e("uview-ui/components/u-icon/u-icon").then(o.bind(null,"ff68"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-input/u-input")]).then(o.bind(null,"f5a0"))},uLine:function(){return o.e("uview-ui/components/u-line/u-line").then(o.bind(null,"ee2f"))},uUpload:function(){return Promise.all([o.e("common/vendor"),o.e("uview-ui/components/u-upload/u-upload")]).then(o.bind(null,"fea3"))},uButton:function(){return o.e("uview-ui/components/u-button/u-button").then(o.bind(null,"7efc"))},uSelect:function(){return o.e("uview-ui/components/u-select/u-select").then(o.bind(null,"8a83"))}},n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.show=!0})},c=[]},a5fc:function(t,e,o){"use strict";o.r(e);var i=o("0c87"),n=o.n(i);for(var c in i)"default"!==c&&function(t){o.d(e,t,(function(){return i[t]}))}(c);e["default"]=n.a},fb14:function(t,e,o){}},[["28ee","common/runtime","common/vendor"]]]);