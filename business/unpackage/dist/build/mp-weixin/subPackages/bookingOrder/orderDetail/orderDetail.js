(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/bookingOrder/orderDetail/orderDetail"],{"48e2":function(e,t,r){"use strict";r.r(t);var i=r("d9af"),n=r.n(i);for(var a in i)"default"!==a&&function(e){r.d(t,e,(function(){return i[e]}))}(a);t["default"]=n.a},"5ce7":function(e,t,r){"use strict";r.r(t);var i=r("a34d"),n=r("48e2");for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);r("8fbb");var o,u=r("f0c5"),s=Object(u["a"])(n["default"],i["b"],i["c"],!1,null,"c4017b10",null,!1,i["a"],o);t["default"]=s.exports},6909:function(e,t,r){"use strict";(function(e){r("7ade");i(r("66fd"));var t=i(r("5ce7"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},"8fbb":function(e,t,r){"use strict";var i=r("b707"),n=r.n(i);n.a},a34d:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return i}));var i={uGap:function(){return r.e("uview-ui/components/u-gap/u-gap").then(r.bind(null,"94c1"))},uLine:function(){return r.e("uview-ui/components/u-line/u-line").then(r.bind(null,"ee2f"))},uRate:function(){return r.e("uview-ui/components/u-rate/u-rate").then(r.bind(null,"6e20"))},uImage:function(){return r.e("uview-ui/components/u-image/u-image").then(r.bind(null,"412e"))}},n=function(){var e=this,t=e.$createElement,r=(e._self._c,e.getOrderStatus(e.orderDetail)),i=e.$u.timeFormat(new Date(e.orderDetail.createTime).getTime(),"yyyy-mm-dd hh:MM"),n=e.$u.timeFormat(new Date(e.orderDetail.scheduledTime).getTime(),"yyyy-mm-dd"),a="INIT"!=e.orderDetail.orderStatus&&"WAITCONFIRM"!=e.orderDetail.orderStatus&&"PAYOFF"!=e.orderDetail.orderStatus?JSON.stringify(e.orderDetail):null,o=e.orderDetail.orderStatus?e.getBtnText(e.orderDetail):null;e.$mp.data=Object.assign({},{$root:{m0:r,g0:i,g1:n,g2:a,m1:o}})},a=[]},b707:function(e,t,r){},d9af:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={data:function(){return{imgList1:[],imgList2:[],orderDetail:{replyList:[],commodityPrice:0,id:""},orderId:"",value:0,appraise:"",fz30:{fontSize:"30rpx"}}},onShow:function(){this.getOrderDetail()},onLoad:function(e){this.orderId=e.orderId},methods:{handleCall:function(){e.makePhoneCall({phoneNumber:this.orderDetail.userPhone})},addImgList1:function(e,t,r,i){this.imgList1.push(e)},removeImgList1:function(e,t,r){var i=this.imgList1;i.splice(e,1),this.imgList1=i},addImgList2:function(e,t,r,i){this.imgList2.push(e)},removeImgList2:function(e,t,r){var i=this.imgList2;i.splice(e,1),this.imgList2=i},getOrderDetail:function(){var e=this;this.$u.api.getOrderDetail({orderId:this.orderId}).then((function(t){var r=JSON.parse(t);if(e.orderDetail=r,r.maintainRemark&&(e.orderDetail.maintainRemark=JSON.parse(r.maintainRemark)),e.appraise=r.appraise,r.appraise&&r.appraise.img&&(e.appraise.img=JSON.parse(r.appraise.img)),r.replyList)for(var i=0;i<r.replyList.length;i++)r.replyList[i].img&&(r.replyList[i].img=JSON.parse(r.replyList[i].img));e.orderDetail=r}))},previewImage:function(e,t){wx.previewImage({current:e,urls:t})},getOrderStatus:function(e){switch(e.orderStatus){case"INIT":return"已预约";case"WAITCONFIRM":return"待确认";case"PAYOFF":return"待支付";case"EXECUTING":return"服务中";case"SUCCESS":return"已完成";case"REFUND":return"已退款";case"FAIL":return"已取消";default:return""}},getBtnText:function(e){switch(e.orderStatus){case"INIT":return"确认接单";case"WAITCONFIRM":return"完善订单";case"PAYOFF":return"待支付";case"EXECUTING":return"确认收款";case"SUCCESS":return 1==e.refund?"已申请退款":0==e.evaluate?"待评价":"去回复";case"REFUND":return"已退款";case"FAIL":return"已取消";default:return""}},getBtnClick:function(){var t=this,r=this.orderDetail;if("INIT"==r.orderStatus){var i="WAITCONFIRM";this.$u.api.setOrderStatus({orderId:r.id,status:i}).then((function(r){console.log(r),200==r.code?(e.showToast({title:"接单成功"}),t.getOrderDetail()):e.showToast({title:"出错了，请重新试试！",icon:"none"})}))}if("WAITCONFIRM"==r.orderStatus&&e.navigateTo({url:"/subPackages/bookingOrder/orderDetail/payBookingOrder/payBookingOrder?orderId="+r.id}),"PAYOFF"==r.orderStatus&&e.showToast({title:"等待客户支付",icon:"none"}),"EXECUTING"==r.orderStatus){var n="SUCCESS";this.$u.api.setOrderStatus({orderId:r.id,status:n,before:JSON.stringify(this.imgList1),after:JSON.stringify(this.imgList2)}).then((function(r){console.log(r),200==r.code?(e.showToast({title:"收款成功"}),t.getOrderDetail()):e.showToast({title:"出错了，请重新试试！",icon:"none"})}))}"SUCCESS"==r.orderStatus&&(0==r.evaluate&&e.showToast({title:"等待用户评价",icon:"none"}),1==r.evaluate&&e.navigateTo({url:"../reply/reply?orderId="+r.id})),"FAIL"==r.orderStatus&&e.showToast({title:"订单已取消",icon:"none"})}}};t.default=r}).call(this,r("543d")["default"])}},[["6909","common/runtime","common/vendor"]]]);