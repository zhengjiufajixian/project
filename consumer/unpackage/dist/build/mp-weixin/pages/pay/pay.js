(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/pay/pay"],{"11e2":function(e,t,n){"use strict";(function(e){n("a739");r(n("66fd"));var t=r(n("c66c"));function r(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"1f84":function(e,t,n){},2124:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return r}));var r={uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"6ac5"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"99e7"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"936d"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"ac40"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"45ba"))},uMask:function(){return n.e("uview-ui/components/u-mask/u-mask").then(n.bind(null,"5b32"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"7e8b"))}},o=function(){var e=this,t=e.$createElement;e._self._c},u=[]},"9da8":function(e,t,n){"use strict";n.r(t);var r=n("adb5"),o=n.n(r);for(var u in r)"default"!==u&&function(e){n.d(t,e,(function(){return r[e]}))}(u);t["default"]=o.a},adb5:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("9552")),o=u(n("8cc0"));function u(e){return e&&e.__esModule?e:{default:e}}function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=r?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var c={data:function(){return{show:!1,customStyle:{fontSize:"40rpx",lineHeight:"40rpx",height:"40rpx",fontWeight:"bold"},list:[{name:"余额",value:"YE"},{name:"微信",value:"WX"}],wallet:{},orderData:{},paymentType:""}},onShow:function(){this.getWaletDetail()},onLoad:function(e){this.orderData=e},methods:{radioChange:function(e){this.paymentType=e.detail.value},getWaletDetail:function(){var e=this;this.$u.api.getWaletDetail().then((function(t){e.wallet=t.totalAmount}))},submit:function(){var t=this,n=this;this.paymentType?"YE"==this.paymentType&&this.wallet<this.orderData.commodityPrice?e.showToast({title:"余额不足，请充值，或者使用微信支付",icon:"none"}):this.$u.api.createOrder({userId:e.getStorageSync("userId"),shopId:this.orderData.shopId,merchantId:this.orderData.merchantId,commodityId:this.orderData.commodityId,commodityPrice:this.orderData.commodityPrice,carNumber:this.orderData.carNumber,scheduledTime:this.orderData.scheduledTime,orderType:this.orderData.orderType,paymentType:this.paymentType,openId:e.getStorageSync("openid"),orderRemark:this.orderData.orderRemark}).then((function(u){if("WX"==t.paymentType){u.orderId;var i=r.WX_appId,a=r.getNum(),c="prepay_id="+u.prepayid,d="MD5",l=Date.parse(new Date).toString(),s=r.key,f=o.default.md5("appId="+i+"&nonceStr="+a+"&package="+c+"&signType="+d+"&timeStamp="+l+"&key="+s);wx.requestPayment({timeStamp:l,nonceStr:a,package:c,signType:d,paySign:f,success:function(e){console.log(e),n.show=!0},complete:function(e){console.log(e)}})}"YE"==t.paymentType&&(n.show=!0,setTimeout((function(){e.redirectTo({url:"../order/orderDetail/orderDetail?id="+u.orderId})}),1500))})):e.showToast({title:"请选择支付方式",icon:"none"})}}};t.default=c}).call(this,n("543d")["default"])},c66c:function(e,t,n){"use strict";n.r(t);var r=n("2124"),o=n("9da8");for(var u in o)"default"!==u&&function(e){n.d(t,e,(function(){return o[e]}))}(u);n("fca5");var i,a=n("f0c5"),c=Object(a["a"])(o["default"],r["b"],r["c"],!1,null,"2667f572",null,!1,r["a"],i);t["default"]=c.exports},fca5:function(e,t,n){"use strict";var r=n("1f84"),o=n.n(r);o.a}},[["11e2","common/runtime","common/vendor"]]]);