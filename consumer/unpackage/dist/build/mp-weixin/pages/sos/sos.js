(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/sos/sos"],{"0838":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,i=r(n("5d22")),u=c(n("1e31"));function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function c(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function r(t){return t&&t.__esModule?t:{default:t}}var s={data:function(){return{latitude:t.getStorageSync("latitude"),longitude:t.getStorageSync("longitude"),covers:[{id:1,latitude:this.latitude,longitude:this.longitude,iconPath:"/static/image/location-icon.png",width:"43",height:"53"}],show:!1,show2:!1,isLogin:t.getStorageSync("token"),flag:!1,carModal:!1}},onShow:function(){this.getLocation(),this.isLogin=t.getStorageSync("token")},onLoad:function(){o=new i.default({key:u.WX_map_key})},methods:{toAddCar:function(){t.navigateTo({url:"/subPackages/myCar/myCar"})},getLocation:function(){var e=this;t.getLocation({type:"gcj02",isHighAccuracy:!0,geocode:!0,success:function(t){var n=t.latitude,i=t.longitude;o.reverseGeocoder({location:n+","+i,success:function(t,o){var u=t.result.formatted_addresses.recommend;e.setLocation(i,n,u)}})},fail:function(t){}})},setLocation:function(t,e,n){this.latitude=e,this.longitude=t,this.covers[0].latitude=e,this.covers[0].longitude=t},showTips:function(){this.show=!0,this.flag=!0},next:function(){this.show=!1,t.setStorageSync("sosTips",!0),this.flag||(this.show2=!0),this.flag=!1},sosBtnClick:function(){if(t.getStorageSync("token")){if(!t.getStorageSync("carNumber"))return void(this.carModal=!0);t.getStorageSync("sosTips")?this.show2=!0:this.show=!0}else t.navigateTo({url:"/pages/login/login"})},handleClick:function(){this.show2=!1,t.showLoading({title:"请稍等..."});var e=this;o.calculateDistance({mode:"driving",from:{latitude:u.resureLocation.latitude,longitude:u.resureLocation.longitude},to:[{latitude:t.getStorageSync("latitude"),longitude:t.getStorageSync("longitude")}],success:function(t,n){0==t.status&&e.addRescue(t.result.elements[0])}})},addRescue:function(e){var n=this;this.$u.api.addRescue({userId:t.getStorageSync("userId"),longitude:t.getStorageSync("longitude"),latitude:t.getStorageSync("latitude"),distance:e.distance,duration:e.duration}).then((function(e){500==e.code?(t.showToast({title:"订单创建失败",icon:"none"}),t.hideLoading(),console.log(e)):(t.hideLoading(),n.call())}))},call:function(){t.makePhoneCall({phoneNumber:u.contactPhone})}}};e.default=s}).call(this,n("543d")["default"])},"1e83":function(t,e,n){},5353:function(t,e,n){"use strict";(function(t){n("921c");o(n("66fd"));var e=o(n("f9cb"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"750f":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return o}));var o={uPopup:function(){return n.e("uview-ui/components/u-popup/u-popup").then(n.bind(null,"5010"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"44ae"))},uModal:function(){return n.e("uview-ui/components/u-modal/u-modal").then(n.bind(null,"19c7"))}},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.show=!1},t.e1=function(e){t.show2=!1})},u=[]},a241:function(t,e,n){"use strict";var o=n("1e83"),i=n.n(o);i.a},c679:function(t,e,n){"use strict";n.r(e);var o=n("0838"),i=n.n(o);for(var u in o)"default"!==u&&function(t){n.d(e,t,(function(){return o[t]}))}(u);e["default"]=i.a},f9cb:function(t,e,n){"use strict";n.r(e);var o=n("750f"),i=n("c679");for(var u in i)"default"!==u&&function(t){n.d(e,t,(function(){return i[t]}))}(u);n("a241");var a,c=n("f0c5"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=r.exports}},[["5353","common/runtime","common/vendor"]]]);