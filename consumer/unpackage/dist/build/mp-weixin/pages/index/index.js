(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0188":function(t,e,n){"use strict";var o=n("0726"),i=n.n(o);i.a},"0726":function(t,e,n){},ad30:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,i=r(n("5d22")),u=s(n("1e31"));function a(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=o?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function r(t){return t&&t.__esModule?t:{default:t}}var c={data:function(){return{bannerList:[],shopList:[],customStyle:{backgroundColor:"#ffba09",color:"#fff",height:"40rpx",lineHeight:"40rpx"},status:"loading",page:0,list:["大众上半年亏损8亿欧元 迪斯再获监事...","身具双重任务 东风冲高“绘”岚图..."],latitude:"",longitude:"",address:"正在定位",loading:!0,carModal:!1}},onPullDownRefresh:function(){this.page=0,this.shopList=[],this.status="loading",this.getMerchatShopList(!0)},onShow:function(){this.latitude=t.getStorageSync("latitude"),this.longitude=t.getStorageSync("longitude"),this.address=t.getStorageSync("address"),t.getStorageSync("latitude")?(this.loading&&(this.loading=!1),this.getMerchatShopList()):this.getLocation()},onLoad:function(){o=new i.default({key:u.WX_map_key}),this.getBannerlist()},methods:{getLocation:function(){var e=this;t.getLocation({type:"gcj02",isHighAccuracy:!0,geocode:!0,success:function(t){var n=t.latitude,i=t.longitude;o.reverseGeocoder({location:n+","+i,success:function(t,o){var u=t.result.formatted_addresses.recommend;e.setLocation(i,n,u)}})}})},handleClick:function(e){var n=this.bannerList[e];"share"==n.page&&t.navigateTo({url:"/subPackages/share/share"}),"charge"==n.page&&t.navigateTo({url:"/pages/charge/charge"})},toAddCar:function(){t.navigateTo({url:"/subPackages/myCar/myCar"})},toDetail:function(e){t.getStorageSync("token")?t.getStorageSync("carNumber")?t.navigateTo({url:"/subPackages/shop/shopDetail/shopDetail?shopId="+e.id}):this.carModal=!0:t.navigateTo({url:"/pages/login/login"})},turnTo:function(){t.navigateTo({url:"/subPackages/shop/shop"})},setLocation:function(e,n,o){this.latitude=n,this.longitude=e,this.address=o,t.setStorageSync("latitude",n),t.setStorageSync("longitude",e),t.setStorageSync("address",o),this.page=0,this.status="loading",this.shopList=[],this.getMerchatShopList(),this.loading&&(this.loading=!1)},choseLocation:function(){var t=this;wx.chooseLocation({success:function(e){console.log(e),e.name&&t.setLocation(e.longitude,e.latitude,e.name)},fail:function(){wx.getSetting({success:function(e){var n=e.authSetting;console.log(n),n["scope.userLocation"]||wx.showModal({title:"是否授权当前位置",content:"需要获取您的地理位置，请确认授权，否则地图功能将无法使用",success:function(e){e.confirm?wx.openSetting({success:function(e){!0===e.authSetting["scope.userLocation"]&&(wx.showToast({title:"授权成功",icon:"success",duration:1e3}),setTimeout((function(){t.choseLocation()}),500))}}):wx.showToast({title:"授权失败",icon:"none",duration:1e3})}})}})}})},seeAll:function(){t.navigateTo({url:"/subPackages/allShop/allShop"})},getDistance:function(e){return u.getDistance(e.latitude,e.longitude,t.getStorageSync("latitude"),t.getStorageSync("longitude"))},getBannerlist:function(){var t=this;this.$u.api.getBanner().then((function(e){t.bannerList=e})).catch((function(t){console.log(t)}))},getMerchatShopList:function(e){var n=this;this.page++,this.$u.api.getMerchatShopList({type:"XC",page:this.page}).then((function(o){e&&t.stopPullDownRefresh(),o.length<10&&(n.status="nomore"),n.shopList=n.shopList.concat(o)})).catch((function(e){t.showToast({title:"啊哦，出错了，请稍后重试",icon:"none"}),console.log(e),n.status="nomore"}))},washCar:function(e){t.getStorageSync("token")?t.getStorageSync("carNumber")?t.navigateTo({url:"/subPackages/washCar/washCar?data="+JSON.stringify(e)}):this.carModal=!0:t.navigateTo({url:"/pages/login/login"})}},onReachBottom:function(){"nomore"!=this.status&&(this.status="loading",this.getMerchatShopList())}};e.default=c}).call(this,n("543d")["default"])},b165:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return o}));var o={uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"44ae"))},uSwiper:function(){return n.e("uview-ui/components/u-swiper/u-swiper").then(n.bind(null,"0f0d"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"0d4b"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"7f81"))},uLoading:function(){return n.e("uview-ui/components/u-loading/u-loading").then(n.bind(null,"3b0b"))},uRate:function(){return n.e("uview-ui/components/u-rate/u-rate").then(n.bind(null,"b903"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"cf37"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"a939"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"8e50"))},uSkeleton:function(){return n.e("uview-ui/components/u-skeleton/u-skeleton").then(n.bind(null,"6dc2"))},uModal:function(){return n.e("uview-ui/components/u-modal/u-modal").then(n.bind(null,"19c7"))}},i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.shopList,(function(e,n){var o=t.__get_orig(e),i=t.getDistance(e);return{$orig:o,m0:i}})));t.$mp.data=Object.assign({},{$root:{l0:n}})},u=[]},bd4e:function(t,e,n){"use strict";n.r(e);var o=n("b165"),i=n("dfed");for(var u in i)"default"!==u&&function(t){n.d(e,t,(function(){return i[t]}))}(u);n("0188");var a,s=n("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);e["default"]=r.exports},dfed:function(t,e,n){"use strict";n.r(e);var o=n("ad30"),i=n.n(o);for(var u in o)"default"!==u&&function(t){n.d(e,t,(function(){return o[t]}))}(u);e["default"]=i.a},f9e3:function(t,e,n){"use strict";(function(t){n("921c");o(n("66fd"));var e=o(n("bd4e"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["f9e3","common/runtime","common/vendor"]]]);