(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/booking/booking"],{"1a09":function(t,e,n){},"72ae":function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var r={uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"a939"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"44ae"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"7f81"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"8e50"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"c624"))}},u=function(){var t=this,e=t.$createElement,n=(t._self._c,t.orderList.length>0?t.__map(t.orderList,(function(e,n){var r=t.__get_orig(e),u=t.$u.timeFormat(new Date(e.createTime).getTime(),"yyyy-mm-dd hh:MM"),o=t.getBtnStyle(e),a=t.getOrderStatus(e),i=t.getBtnText(e),c=i?t.getBtnText(e):null;return{$orig:r,g0:u,m0:o,m1:a,m2:i,m3:c}})):null);t.$mp.data=Object.assign({},{$root:{l0:n}})},o=[]},af11:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("1e31"));function u(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function o(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=r?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}var a={data:function(){return{page:0,status:"loading",orderList:[]}},onShow:function(){this.getOrderList()},onLoad:function(){},onPullDownRefresh:function(){this.page=0,this.orderList=[],this.status="loading",this.getOrderList(!0)},methods:{getShopDetail:function(t,e){this.$u.api.getShopDetail({shopId:t.shopId}).then((function(t){e(t)}))},getOrderStatus:function(t){switch(t.orderStatus){case"INIT":return"XC"==t.orderType?"待确认":"待接单";case"WAITCONFIRM":return"XC"==t.orderType?"待接单":"待报价";case"PAYOFF":return"待付款";case"EXECUTING":return"进行中";case"SUCCESS":return 0==t.refund?"已完成":"已申请退款";case"FAIL":return"已取消";case"REFUND":return"已退款";default:return""}},getBtnText:function(t){switch(t.orderStatus){case"WAITCONFIRM":return"等待报价";case"EXECUTING":return"等待完成";case"SUCCESS":return 0==t.refund?0==t.evaluate?"去评价":"查看评价":"";case"FAIL":return"无效订单";case"REFUND":return"已退款";default:return""}},getBtnStyle:function(t){switch(t.orderStatus){case"INIT":return"color-FFBA09";case"WAITCONFIRM":return"color-1672FF";case"PAYOFF":return"color-1672FF";case"EXECUTING":return"color-13E3A5";case"SUCCESS":return"color-FF2828";case"FAIL":return"color-999999";case"REFUND":return"color-999999";default:break}},getBtnClick:function(e,n){"WAITCONFIRM"==e.orderStatus&&t.showToast({title:"等待商家报价",icon:"none"}),"SUCCESS"==e.orderStatus&&(0==e.evaluate?t.navigateTo({url:"/subPackages/order/rate/rate?orderId="+e.id}):t.navigateTo({url:"/subPackages/booking/bookingDetail/bookingDetail?orderId="+e.id}))},cancelOrder:function(e){var n=this;if("INIT"==e.orderStatus){var r="FAIL";this.$u.api.setOrderStatus({orderId:e.id,status:r}).then((function(e){t.showToast({title:"预约取消成功"}),n.orderList[index].orderStatus=r}))}},call:function(e){t.makePhoneCall({phoneNumber:e.shopPhone})},navi:function(t){r.tencentMapNavi(t.shopName,t.latitude,t.longitude)},getOrderList:function(e){var n=this;this.page++,this.$u.api.getOrderList({page:this.page,status:"ALL",orderType:"BY"}).then((function(r){e&&t.stopPullDownRefresh(),r.length<10&&(n.status="nomore"),n.orderList=n.orderList.concat(r)}))},onReachBottom:function(){"nomore"!=this.status&&(this.status="loading",this.getOrderList())}}};e.default=a}).call(this,n("543d")["default"])},b74c:function(t,e,n){"use strict";n.r(e);var r=n("72ae"),u=n("c690");for(var o in u)"default"!==o&&function(t){n.d(e,t,(function(){return u[t]}))}(o);n("be21");var a,i=n("f0c5"),c=Object(i["a"])(u["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);e["default"]=c.exports},be21:function(t,e,n){"use strict";var r=n("1a09"),u=n.n(r);u.a},c690:function(t,e,n){"use strict";n.r(e);var r=n("af11"),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=u.a},ea07:function(t,e,n){"use strict";(function(t){n("921c");r(n("66fd"));var e=r(n("b74c"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])}},[["ea07","common/runtime","common/vendor"]]]);