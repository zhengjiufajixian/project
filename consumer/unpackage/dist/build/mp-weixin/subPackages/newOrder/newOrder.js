(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/newOrder/newOrder"],{"067d":function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return n}));var n={uTabsSwiper:function(){return Promise.all([r.e("common/vendor"),r.e("uview-ui/components/u-tabs-swiper/u-tabs-swiper")]).then(r.bind(null,"5d66"))},uLine:function(){return r.e("uview-ui/components/u-line/u-line").then(r.bind(null,"a939"))},uIcon:function(){return r.e("uview-ui/components/u-icon/u-icon").then(r.bind(null,"44ae"))},uImage:function(){return r.e("uview-ui/components/u-image/u-image").then(r.bind(null,"7f81"))},uGap:function(){return r.e("uview-ui/components/u-gap/u-gap").then(r.bind(null,"0d4b"))},uLoadmore:function(){return r.e("uview-ui/components/u-loadmore/u-loadmore").then(r.bind(null,"8e50"))},uEmpty:function(){return r.e("uview-ui/components/u-empty/u-empty").then(r.bind(null,"c624"))}},u=function(){var t=this,e=t.$createElement,r=(t._self._c,t.__map(t.list,(function(e,r){var n=t.__get_orig(e),u=t.orderList[r].length>0?t.__map(t.orderList[r],(function(e,r){var n=t.__get_orig(e),u=t.$u.timeFormat(new Date(e.createTime).getTime(),"yyyy-mm-dd hh:MM"),a=t.getBtnStyle(e),i=t.getOrderStatus(e),o=t.getBtnText(e),s=o?t.getBtnText(e):null;return{$orig:n,g0:u,m0:a,m1:i,m2:o,m3:s}})):null;return{$orig:n,l0:u}})));t.$mp.data=Object.assign({},{$root:{l1:r}})},a=[]},"560b":function(t,e,r){"use strict";var n=r("d51e"),u=r.n(n);u.a},"67f3":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(r("1e31"));function u(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function a(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=n?Object.getOwnPropertyDescriptor(t,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=t[a]}return r.default=t,e&&e.set(t,r),r}var i={data:function(){return{list:[{name:"全部",value:"ALL"},{name:"待支付",value:"INIT"},{name:"服务中",value:"EXECUTING"},{name:"已完成",value:"SUCCESS"},{name:"已取消",value:"FAIL"}],currentPage:0,current:0,page:[1,1,1,1,1],orderList:[[],[],[],[],[]],swiperCurrent:0,tabsHeight:0,dx:0,loadStatus:["loadmore","loadmore","loadmore","loadmore","loadmore"]}},onShow:function(){this.loadStatus=["loadmore","loadmore","loadmore","loadmore","loadmore"],this.page=[1,1,1,1,1],this.orderList=[[],[],[],[],[]],this.current=0,this.currentPage=0,this.swiperCurrent=0,this.getOrderList()},methods:{getShopDetail:function(t,e){this.$u.api.getShopDetail({shopId:t.shopId}).then((function(t){e(t)}))},call:function(e){t.makePhoneCall({phoneNumber:e.shopPhone})},navi:function(t){n.tencentMapNavi(t.shopName,t.latitude,t.longitude)},setPage:function(){t.navigateTo({url:"publish/publish"})},customStyle:function(){return{}},getOrderStatus:function(t){switch(t.orderStatus){case"INIT":return"未支付";case"WAITCONFIRM":return"待接单";case"EXECUTING":return"进行中";case"SUCCESS":return"已完成";case"FAIL":return"已取消";case"REFUND":return"已退款";default:break}},getBtnText:function(t){switch(t.orderStatus){case"INIT":return"取消订单";case"WAITCONFIRM":return"取消订单";case"EXECUTING":return"等待完成";case"SUCCESS":return 0==t.refund?0==t.evaluate?"去评价":"查看评价":"";case"FAIL":return"无效订单";case"REFUND":return"已退款";default:break}},getBtnStyle:function(t){switch(t.orderStatus){case"INIT":return"color-FFBA09";case"WAITCONFIRM":return"color-1672FF";case"PAYOFF":return"color-1672FF";case"EXECUTING":return"color-13E3A5";case"SUCCESS":return"color-FF2828";case"FAIL":return"color-999999";case"REFUND":return"color-999999";default:break}},getBtnClick:function(e,r){var n=this;if("INIT"==e.orderStatus){var u="FAIL";this.$u.api.setOrderStatus({orderId:e.id,status:u}).then((function(e){t.showToast({title:"订单取消成功"}),n.$set(n.orderList[n.currentPage][r],"orderStatus",u)}))}if("WAITCONFIRM"==e.orderStatus){var a="FAIL";this.$u.api.setOrderStatus({orderId:e.id,status:a}).then((function(e){t.showToast({title:"订单取消成功"}),n.$set(n.orderList[n.currentPage][r],"orderStatus",a)}))}"SUCCESS"==e.orderStatus&&(0==e.evaluate?t.navigateTo({url:"/subPackages/order/rate/rate?orderId="+e.id}):t.navigateTo({url:"/subPackages/booking/bookingDetail/bookingDetail?orderId="+e.id}))},getOrderList:function(t){var e=this,r=t||this.currentPage;"nomore"!=this.loadStatus[r]&&this.$u.api.getOrderList({page:this.page[r],status:this.list[r].value,orderType:"XC"}).then((function(t){t.length<10?e.loadStatus.splice(r,1,"nomore"):e.loadStatus.splice(r,1,"loadmore");var n=e.orderList[r].concat(t);e.orderList.splice(r,1,n)}))},reachBottom:function(){if("nomore"!=this.loadStatus[this.currentPage]){var t=this.page[this.currentPage];t++,this.page.splice(this.currentPage,1,t),this.getOrderList()}},totalPrice:function(t){var e=0;return t.map((function(t){e+=parseFloat(t.price)})),e.toFixed(2)},totalNum:function(t){var e=0;return t.map((function(t){e+=t.number})),e},change:function(t){this.swiperCurrent=t,this.currentPage=t,this.page[this.currentPage]=1,this.orderList[this.currentPage]=[],this.loadStatus[this.currentPage]="loadmore"},transition:function(t){var e=t.detail.dx;this.$refs.tabs.setDx(e)},animationfinish:function(t){var e=t.detail.current;this.$refs.tabs.setFinishCurrent(e),this.swiperCurrent=e,this.current=e,this.currentPage=e,0==this.orderList[e].length&&this.getOrderList()}}};e.default=i}).call(this,r("543d")["default"])},"71ab":function(t,e,r){"use strict";var n=r("f63f"),u=r.n(n);u.a},"8c30":function(t,e,r){"use strict";r.r(e);var n=r("067d"),u=r("aec6");for(var a in u)"default"!==a&&function(t){r.d(e,t,(function(){return u[t]}))}(a);r("71ab"),r("560b");var i,o=r("f0c5"),s=Object(o["a"])(u["default"],n["b"],n["c"],!1,null,"2dd2db53",null,!1,n["a"],i);e["default"]=s.exports},aec6:function(t,e,r){"use strict";r.r(e);var n=r("67f3"),u=r.n(n);for(var a in n)"default"!==a&&function(t){r.d(e,t,(function(){return n[t]}))}(a);e["default"]=u.a},d51e:function(t,e,r){},f328:function(t,e,r){"use strict";(function(t){r("921c");n(r("66fd"));var e=n(r("8c30"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},f63f:function(t,e,r){}},[["f328","common/runtime","common/vendor"]]]);