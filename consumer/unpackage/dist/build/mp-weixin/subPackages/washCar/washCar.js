(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/washCar/washCar"],{5595:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("1e31"));o(n("c704"));function o(t){return t&&t.__esModule?t:{default:t}}function u(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=i?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(n,o,r):n[o]=t[o]}return n.default=t,e&&e.set(t,n),n}var a={data:function(){return{count:4,value:2,show:!1,params:{year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!1},userPhone:"",carNumber:"",carModel:"",isBindCar:!1,select:!1,shopInfo:{},commodityType:"",commodityList:[],commodityPrice:0,commodityId:[],scheduledTime:"选择服务时间",orderRemark:"",page:0,headStyle:{padding:0},listStatus:!1,actionSheetList:i.actionSheetList}},onShow:function(){this.userPhone||(this.userPhone=t.getStorageSync("userPhone")),this.carNumber=t.getStorageSync("carNumber"),this.carModel=t.getStorageSync("carModel"),this.isBindCar=!Boolean(t.getStorageSync("carNumber")),this.page=0,this.getTypeList()},onLoad:function(t){this.shopInfo=JSON.parse(t.data)},methods:{actionSheetCallback:function(t){this.carModel=this.actionSheetList[t].text},getDistance:function(){return i.getDistance(this.shopInfo.latitude,this.shopInfo.longitude,t.getStorageSync("latitude"),t.getStorageSync("longitude"))},getCar:function(){var t=this;this.$u.api.getCar().then((function(e){t.carNumber=e.carNumber}))},getBtnStatus:function(){return!(this.carNumber&&"选择服务时间"!=this.scheduledTime&&this.commodityId.length>0)},setPage:function(e,n){t.navigateTo({url:"/pages/"+e+"/"+e+"?data="+JSON.stringify(n)})},getTypeList:function(){var t=this;this.$u.api.getTypeList().then((function(e){for(var n=0;n<e.length;n++){var i=e[n];"洗车"==i.typeName&&(t.commodityType=i.typeCode)}t.getCommodityList()}))},getCommodityList:function(){var t=this;this.page++,this.$u.api.getCommodityList({page:this.page,shopId:this.shopInfo.id,commodityType:this.commodityType}).then((function(e){t.commodityList=e}))},getTotalPrice:function(t){for(var e=t.detail.value,n=[],i=0,o=0;o<e.length;o++){var u=JSON.parse(e[o]);i+=100*Number(u.commodityPrice),n.push(u.id)}this.commodityPrice=i/100,this.commodityId=n},pickerConfirm:function(t){var e=t.year+"-"+t.month+"-"+t.day+" "+t.hour+":"+t.minute+":00";this.scheduledTime=e},submit:function(){this.userPhone?this.carNumber?"选择服务时间"!=this.scheduledTime?0!=this.commodityId.length?t.navigateTo({url:"../pay/pay?payType=0&shopId="+this.shopInfo.id+"&merchantId="+this.shopInfo.merchantId+"&commodityId="+this.commodityId+"&commodityPrice="+this.commodityPrice+"&carNumber="+this.carNumber+"&carModel="+this.carModel+"&userPhone="+this.userPhone+"&scheduledTime="+new Date(this.scheduledTime.replace(/-/g,"/")).getTime()+"&orderType="+this.commodityType+"&orderRemark="+this.orderRemark}):t.showToast({title:"请选择服务项目",icon:"none"}):t.showToast({title:"请选择服务时间",icon:"none"}):t.showToast({title:"请输入车牌号",icon:"none"}):t.showToast({title:"请输入联系电话",icon:"none"})}}};e.default=a}).call(this,n("543d")["default"])},5898:function(t,e,n){"use strict";n.r(e);var i=n("b5fc"),o=n("dac2");for(var u in o)"default"!==u&&function(t){n.d(e,t,(function(){return o[t]}))}(u);n("d7f3");var r,a=n("f0c5"),c=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=c.exports},"63fb":function(t,e,n){},"71ad":function(t,e,n){"use strict";(function(t){n("921c");i(n("66fd"));var e=i(n("5898"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},b5fc:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return i}));var i={uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"0d4b"))},uAvatar:function(){return n.e("uview-ui/components/u-avatar/u-avatar").then(n.bind(null,"c6b8"))},uRate:function(){return n.e("uview-ui/components/u-rate/u-rate").then(n.bind(null,"b903"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"44ae"))},uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-input/u-input")]).then(n.bind(null,"0a0a"))},uCollapse:function(){return n.e("uview-ui/components/u-collapse/u-collapse").then(n.bind(null,"9b42"))},uCollapseItem:function(){return n.e("uview-ui/components/u-collapse-item/u-collapse-item").then(n.bind(null,"84d4"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"7f81"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"a939"))},uButton:function(){return n.e("uview-ui/components/u-button/u-button").then(n.bind(null,"cf37"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"d56e"))},uActionSheet:function(){return n.e("uview-ui/components/u-action-sheet/u-action-sheet").then(n.bind(null,"59b4"))}},o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.getDistance()),i=t.__map(t.commodityList,(function(e,n){var i=t.__get_orig(e),o=JSON.stringify(e),u=JSON.parse(e.commodityImg);return{$orig:i,g0:o,g1:u}}));t._isMounted||(t.e0=function(e){t.listStatus=!0},t.e1=function(e){t.show=!0}),t.$mp.data=Object.assign({},{$root:{m0:n,l0:i}})},u=[]},d7f3:function(t,e,n){"use strict";var i=n("63fb"),o=n.n(i);o.a},dac2:function(t,e,n){"use strict";n.r(e);var i=n("5595"),o=n.n(i);for(var u in i)"default"!==u&&function(t){n.d(e,t,(function(){return i[t]}))}(u);e["default"]=o.a}},[["71ad","common/runtime","common/vendor"]]]);