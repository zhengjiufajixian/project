(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subPackages/rescue/rescue"],{"189d":function(t,e,n){"use strict";n.r(e);var r=n("d6cc"),u=n("4034");for(var i in u)"default"!==i&&function(t){n.d(e,t,(function(){return u[t]}))}(i);n("a971");var a,o=n("f0c5"),s=Object(o["a"])(u["default"],r["b"],r["c"],!1,null,"3f9f1b4c",null,!1,r["a"],a);e["default"]=s.exports},4034:function(t,e,n){"use strict";n.r(e);var r=n("c53d"),u=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=u.a},"6f6f":function(t,e,n){"use strict";(function(t){n("921c");r(n("66fd"));var e=r(n("189d"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},a971:function(t,e,n){"use strict";var r=n("db83"),u=n.n(r);u.a},c53d:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(n("1e31"));function u(){if("function"!==typeof WeakMap)return null;var t=new WeakMap;return u=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!==typeof t&&"function"!==typeof t)return{default:t};var e=u();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=r?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}var a={data:function(){return{list:[{name:"全部",value:""},{name:"服务中",value:"EXECUTING"},{name:"已完成",value:"SUCCESS"},{name:"已取消",value:"FAIL"}],currentPage:0,current:0,page:[1,1,1,1],orderList:[[],[],[],[]],swiperCurrent:0,tabsHeight:0,dx:0,loadStatus:["loadmore","loadmore","loadmore","loadmore"],config:r}},onShow:function(){this.loadStatus=["loadmore","loadmore","loadmore","loadmore"],this.page=[1,1,1,1],this.orderList=[[],[],[],[]],this.current=0,this.currentPage=0,this.swiperCurrent=0,this.getOrderList()},computed:{priceDecimal:function(){return function(t){return t!==parseInt(t)?t.slice(-2):"00"}},priceInt:function(){return function(t){return t!==parseInt(t)?t.split(".")[0]:t}}},methods:{getShopDetail:function(t,e){this.$u.api.getShopDetail({shopId:t.shopId}).then((function(t){e(t)}))},call:function(e){t.makePhoneCall({phoneNumber:e})},navi:function(t){r.tencentMapNavi(t.shopName,t.latitude,t.longitude)},setPage:function(){t.navigateTo({url:"publish/publish"})},customStyle:function(){return{}},getOrderStatus:function(t){switch(t.status){case"INIT":return"未支付";case"WAITCONFIRM":return"待接单";case"EXECUTING":return"进行中";case"SUCCESS":return"已完成";case"FAIL":return"已取消";case"REFUND":return"已退款";default:break}},getBtnText:function(t){switch(t.status){case"INIT":return"取消订单";case"WAITCONFIRM":return"取消订单";case"EXECUTING":return"等待完成";case"SUCCESS":return 0==t.refund?0==t.evaluate?"去评价":"查看评价":"";case"FAIL":return"无效订单";case"REFUND":return"已退款";default:break}},getBtnStyle:function(t){switch(t.status){case"INIT":return"color-FFBA09";case"EXECUTING":return"color-13E3A5";case"SUCCESS":return"color-FF2828";case"FAIL":return"color-999999";default:break}},getBtnClick:function(e,n){var r=this;if("INIT"==e.status){var u="FAIL";this.$u.api.setOrderStatus({orderId:e.id,status:u}).then((function(e){t.showToast({title:"订单取消成功"}),r.$set(r.orderList[r.currentPage][n],"status",u)}))}if("WAITCONFIRM"==e.status){var i="FAIL";this.$u.api.setOrderStatus({orderId:e.id,status:i}).then((function(e){t.showToast({title:"订单取消成功"}),r.$set(r.orderList[r.currentPage][n],"status",i)}))}"SUCCESS"==e.status&&(0==e.evaluate?t.navigateTo({url:"/subPackages/order/rate/rate?orderId="+e.id}):t.navigateTo({url:"/subPackages/booking/bookingDetail/bookingDetail?orderId="+e.id}))},getOrderList:function(t){var e=this,n=t||this.currentPage;"nomore"!=this.loadStatus[n]&&this.$u.api.getRescueList({page:this.page[n],status:this.list[n].value}).then((function(t){t.length<10?e.loadStatus.splice(n,1,"nomore"):e.loadStatus.splice(n,1,"loadmore");var r=e.orderList[n].concat(t);e.orderList.splice(n,1,r)}))},reachBottom:function(){if("nomore"!=this.loadStatus[this.currentPage]){var t=this.page[this.currentPage];t++,this.page.splice(this.currentPage,1,t),this.getOrderList()}},totalPrice:function(t){var e=0;return t.map((function(t){e+=parseFloat(t.price)})),e.toFixed(2)},totalNum:function(t){var e=0;return t.map((function(t){e+=t.number})),e},change:function(t){this.swiperCurrent=t,this.currentPage=t,this.page[this.currentPage]=1,this.orderList[this.currentPage]=[],this.loadStatus[this.currentPage]="loadmore"},transition:function(t){var e=t.detail.dx;this.$refs.tabs.setDx(e)},animationfinish:function(t){var e=t.detail.current;this.$refs.tabs.setFinishCurrent(e),this.swiperCurrent=e,this.current=e,this.currentPage=e,0==this.orderList[e].length&&this.getOrderList()}}};e.default=a}).call(this,n("543d")["default"])},d6cc:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var r={uTabsSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("uview-ui/components/u-tabs-swiper/u-tabs-swiper")]).then(n.bind(null,"5d66"))},uGap:function(){return n.e("uview-ui/components/u-gap/u-gap").then(n.bind(null,"0d4b"))},uLine:function(){return n.e("uview-ui/components/u-line/u-line").then(n.bind(null,"a939"))},uIcon:function(){return n.e("uview-ui/components/u-icon/u-icon").then(n.bind(null,"44ae"))},uImage:function(){return n.e("uview-ui/components/u-image/u-image").then(n.bind(null,"7f81"))},uLoadmore:function(){return n.e("uview-ui/components/u-loadmore/u-loadmore").then(n.bind(null,"8e50"))},uEmpty:function(){return n.e("uview-ui/components/u-empty/u-empty").then(n.bind(null,"c624"))}},u=function(){var t=this,e=t.$createElement,n=(t._self._c,t.__map(t.list,(function(e,n){var r=t.__get_orig(e),u=t.orderList[n].length>0?t.__map(t.orderList[n],(function(e,n){var r=t.__get_orig(e),u=JSON.stringify(e),i=t.getBtnStyle(e),a=t.getOrderStatus(e),o=t.$u.timeFormat(new Date(e.createTime).getTime(),"yyyy-mm-dd hh:MM");return{$orig:r,g0:u,m0:i,m1:a,g1:o}})):null;return{$orig:r,l0:u}})));t.$mp.data=Object.assign({},{$root:{l1:n}})},i=[]},db83:function(t,e,n){}},[["6f6f","common/runtime","common/vendor"]]]);